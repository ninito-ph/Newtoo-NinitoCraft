Deep_Slow:
  # Throws a projectile which slows down the player
  Cooldown: 7
  Skills:
    - effect:sound{s=block.gravel.place;v=1;p=1.3} @self
    - projectile{onTick=Deep_Slow_Tick;onHit=Deep_Slow_Hit;onEnd=Deep_Slow_Miss;v=9.5;i=1;hR=1;vR=1;syo=1.5}

Deep_Slow_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=redDust;a=20;hs=0.2;vs=0.2;color=#466589} @origin

Deep_Slow_Hit:
  # SFX and functionality for Matriach Spit hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=block.gravel.break;v=1;p=1}
    - effect:particles{p=block;m=gravel;a=10;hs=0.25;vs=0.25;y=1}
    # Applies slow
    - potion{type=SLOW;duration=55;level=1}
    - damage{a=0.1}

Deep_Slow_Miss:
  # SFX for when spit projectile misses
  Skills:
    - effect:particles{p=block;m=gravel;a=15;hs=0.25;vs=0.25;y=1} @origin

Deep_Prison:
  # Imprisons the player in cobblestone
  TargetConditions:
    - blocking cancel
  Cooldown: 7
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.3} @self
    - prison{material=STONE;duration=40;breakable=true} @target
    - effect:particlering{p=redDust;radius=1;points=4;a=20;hs=0.25;vs=0.25;color=#cb48ea} @self

Deep_Repulsion:
  # Throws the player away
  Cooldown: 5
  Skills:
    # Telegraphs shockwave
    - effect:sound{s=entity.enderman.scream;v=1;p=1.3} @self
    - effect:particles{p=reddust;a=16;hs=1;y=1.7;color=#cb48ea} @self
    - delay 40
    # Throws player away and damages
    - effect:sound{s=entity.generic.explode;v=1;p=0.75} @self
    - throw{velocity=8;velocityY=3.5} @PIR{r=5}
    - damage{a=6} @PIR{r=5}
    - effect:particlering{p=redDust;radius=1;points=8;a=20;hs=0.25;vs=0.25;color=#cb48ea} @self
    - delay 2
    - effect:particlering{p=redDust;radius=3;points=12;a=20;hs=0.25;vs=0.25;color=#cb48ea} @self
    - delay 2
    - effect:particlering{p=redDust;radius=5;points=16;a=20;hs=0.25;vs=0.25;color=#cb48ea} @self

Deep_Captain_Followers:
  # Summons duergar. 3 miners and 2 stonebombers.
  Skills:
    - summon{type=Deep_Miner;amount=3;radius=5} @SelfLocation
    - summon{type=Deep_Stonebomber;amount=2;radius=5} @SelfLocation

Deep_Captain_Phase_2:
  # Increases armor and gives a magical staff to the captain.
  Skills:
    - equip{item=stone_hoe:0}
    - equip{item=air:5}
    - potion{type=PROTECTION;duration=10000;level=2} @target

Deep_Captain_Repel:
  # Throws the player away
  Skills:
    # Throws player away
    - effect:sound{s=entity.generic.explode;v=1;p=0.75} @self
    - throw{velocity=4;velocityY=2} @PIR{r=5}
    - effect:particlering{p=redDust;radius=1;points=8;a=20;hs=0.25;vs=0.25;color=#cb48ea} @self

Deep_Captain_Levitate_Casting:
  # Makes mob float for a while, before firing three arrow at target.
  Skills:
    - look{headOnly=false} @target
    - potion{type=LEVITATION;duration=50;level=1} @self
    - delay 10
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.5} @self
    - delay 15
    - skill{s=Deep_Captain_Petrify_Projectile} @target
    - delay 15
    - skill{s=Deep_Captain_Petrify_Projectile} @target

Deep_Captain_Petrify_Projectile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=block.gravel.place;v=1;p=0.2} @self
    - projectile{onTick=Deep_Petrify_Tick;onHit=Deep_Petrify_Hit;onEnd=Deep_Slow_Miss;v=8;i=1;hR=1;vR=1;syo=1.5} @target

Deep_Petrify_Tick:
  # SFX for Deep Captain Petrify Spell
  Skills:
    - effect:particles{p=redDust;a=20;hs=0.15;vs=0.15;color=#cb48ea} @origin

Deep_Petrify_Hit:
  # SFX and functionality for Matriach Spit hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.3} @target
    # Applies slow and petrify
    - potion{type=SLOW;duration=100;level=2} @target
    - prison{material=STONE;duration=40;breakable=true} @target
    - damage{a=8} @target

Shadowblade_Rush:
  Cooldown: 7
  Skills:
    - effect:particles{particle=angryVillager;amount=6;hs=0.5;y=1} @self
    - effect:sound{s=entity.enderman.scream;v=1;p=1.65} @target
    - delay 15
    - potion{type=SPEED;duration=40;level=1} @self

Shadowblade_Darken:
  TargetConditions:
    - blocking cancel
  Skills:
    - potion{type=BLINDNESS;duration=65;level=1} @target
    - potion{type=SLOW;duration=50;level=1}
    - skill{s=Shadowblade_Reposition_Mode}

Shadowblade_Reposition_Mode:
  Skills:
    - effect:smoke @self
    - potion{type=INVISIBILITY;duration=50} @self
    - jump{velocity=2;} @self
    - leap{velocity=-500;noise=3} @target
    - equip{item=air:0}
    - delay 50
    - effect:smoke @self
    - equip{item=iron_sword:0} @self

Warlock_Summon_Spiders:
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.3} @target
    - effect:particles{p=redDust;a=20;hs=0.25;vs=0.25;color=#cb48ea} @origin
    - summon{type=SPIDER;amount=2;radius=4} @self

Magic_Missile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.3} @self
    - missile{onTick=Deep_Petrify_Tick;onHit=Magic_Missile_Hit;onEnd=Deep_Slow_Miss;in=15;v=6;i=1;hR=1;vR=1;syo=1.5;md=120;hnp=false}

Magic_Missile_Hit:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=2} @target
    - effect:particles{p=block;m=amethyst;a=10;hs=0.25;vs=0.25;y=1} @target
    # Damages
    - damage{a=5}

Magic_Missile_Miss:
  # SFX and functionality for magic missile miss
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=2} @origin
    - effect:particles{p=block;m=amethyst;a=10;hs=0.25;vs=0.25;y=1} @origin

Warlock_Enfeeble_Cast:
  # Makes mob float for a while, before firing a debuff at the target.
  Skills:
    - potion{type=LEVITATION;duration=50;level=1} @self
    - delay 10
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - delay 30
    - skill{s=Warlock_Enfeeble_Projectile} @target

Warlock_Enfeeble_Projectile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.1} @self
    - projectile{onTick=Warlock_Enfeeble_Tick;onEnd=Warlock_Enfeeble_End;v=15;i=1;hR=1;vR=1;syo=1.5;md=120;g=0.5;sE=false}

Warlock_Enfeeble_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25;color=#1f1d1d} @origin

Warlock_Enfeeble_End:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.1} @PlayersNearOrigin{r=4}
    # Applies stat effects
    - potion{type=SLOW;duration=140;level=2} @PlayersNearOrigin{r=4}
    - potion{type=WEAKNESS;duration=140;level=1} @PlayersNearOrigin{r=4}
    # Shows SFX
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=redDust;radius=1;points=8;a=20;hs=0.2;vs=0.1;color=#1f1d1d} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=redDust;radius=2;points=12;a=20;hs=0.2;vs=0.1;color=#1f1d1d} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=redDust;radius=4;points=16;a=20;hs=0.2;vs=0.1;color=#1f1d1d} @origin

Ranger_Poison_Arrow:
  TargetContitions:
    - blocking cancel
  Skills:
    # Applies stat effects
    - potion{type=POISON;duration=30;level=1} @target
    - potion{type=BLINDNESS;duration=30;level=1} @target

Ranger_Multi_Shot:
  Skills:
    # Applies stat effects
    - arrowvolley{a=2;s=90;v=30} @Target

Ranger_Phase_2:
  Skills:
    # Applies effects on self
    - potion{type=SPEED;duration=800;level=2;p=false} @self
    - potion{type=INVISIBILITY;duration=150;level=1;p=false} @self
    # Applies effects on allies
    - potion{type=INVISIBILITY;duration=150;level=1;p=false} @MobsInRadius{r=8;types=ZOMBIE,SKELETON}
    - potion{type=SPEED;duration=800;level=1;p=false} @MobsInRadius{r=8;types=ZOMBIE,SKELETON}
    - potion{type=PROTECTION;duration=800;level=1;p=false} @MobsInRadius{r=8;types=ZOMBIE,SKELETON}
    # Shows SFX
    - effect:sound{s=entity.wither_skeleton.death;v=1.5;p=0.25} @self
    - effect:particlering{p=redDust;radius=2;points=8;a=20;hs=0.2;vs=0.1;color=#57cbf2} @origin
    - delay 2
    - effect:particlering{p=redDust;radius=4;points=12;a=20;hs=0.2;vs=0.1;color=#57cbf2} @origin
    - delay 2
    - effect:particlering{p=redDust;radius=6;points=16;a=20;hs=0.2;vs=0.1;color=#57cbf2} @origin
    - delay 2
    - effect:particlering{p=redDust;radius=8;points=16;a=20;hs=0.2;vs=0.1;color=#57cbf2} @origin

Ranger_Phase_3:
  Skills:
    # Applies effects on self
    - potion{type=LEVITATION;duration=100;level=1;p=false} @self
    # Begins firing final volley of arrows
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - delay 20
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target
    - delay 10
    - skill{s=Ranger_Multi_Shot} @target

Ranger_Followers_1:
  # Spawns bandits to follow Bandit Lieutenant. Variant with two fighters.
  Skills:
    - summon{type=Deep_Shadowblade;amount=3;radius=5} @SelfLocation
    - summon{type=Deep_Warlock;amount=1;radius=5} @SelfLocation

Ranger_Followers_2:
  # Spawns bandits to follow Bandit Lieutenant. Variant with two rogues.
  Skills:
    - summon{type=Deep_Shadowblade;amount=2;radius=5} @SelfLocation
    - summon{type=Deep_Warlock;amount=2;radius=5} @SelfLocation

Mastermind_Phase_1:
  Skills:
    # Applies effects on self
    - setstance{s=Clear} @self
    - potion{type=SLOW_FALLING;duration=9999999;level=1;p=false} @self

Mastermind_Repel:
  Conditions:
    - stance{s=Regenerating} false
  Cooldown: 20
  Skills:
    # Applies effects on players
    - potion{type=SLOW;duration=400;level=3;p=false} @PIR{r=12}
    - potion{type=CONFUSION;duration=400;level=1;p=false} @PIR{r=12}
    - potion{type=SLOW_FALLING;duration=400;level=1;p=false} @PIR{r=12}
    - throw{velocity=12;velocityY=10} @PIR{r=12}
    # Shows SFX
    - effect:sound{s=block.portal.travel;v=0.6;p=1.5} @origin
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=2;points=16;a=40;hs=0.5;vs=1;color=#cb48ea} @origin
    - delay 4
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=4;points=32;a=40;hs=0.5;vs=0.8;color=#cb48ea} @origin
    - delay 4
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=6;points=32;a=40;hs=0.5;vs=0.6;color=#cb48ea} @origin
    - delay 4
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=8;points=32;a=40;hs=0.5;vs=0.4;color=#cb48ea} @origin
    - delay 4
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=10;points=32;a=40;hs=0.5;vs=0.2;color=#cb48ea} @origin
    - delay 4
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=12;points=32;a=40;hs=0.5;vs=0.1;color=#cb48ea} @origin

Mastermind_Cloak:
  Conditions:
    - stance{s=Regenerating} false
  Cooldown: 20
  Skills:
    # Applies effects on self
    - potion{type=INVISIBILITY;duration=250;level=1;p=false} @self
    - potion{type=DAMAGE_RESISTANCE;duration=250;level=5;p=false} @self
    # Applies effects on players
    - potion{type=BLINDNESS;duration=200;level=1;} @PIR{r=12}
    - potion{type=SLOW_FALLING;duration=200;level=1;} @PIR{r=12}
    - throw{velocity=6;velocityY=2} @PIR{r=12}
    # Shows SFX
    - effect:sound{s=entity.wither.ambient;v=1.5;p=0.5} @self
    - effect:particlering{p=redDust;radius=2;points=8;a=120;hs=1;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=4;points=12;a=120;hs=1;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=6;points=16;a=120;hs=1;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=8;points=32;a=120;hs=1;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=10;points=32;a=120;hs=1;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=12;points=32;a=120;hs=1;vs=1;color=#1f1d1d} @origin

Mastermind_Armor:
  Conditions:
    - stance{s=Regenerating} false
  Cooldown: 20
  Skills:
    - effect:sound{s=entity.wither.hurt;v=1.5;p=0.5} @self
    - orbital{onTick=Mastermind_Armor_Orb_Tick;onHit=Mastermind_Armor_Orb_Hit;points=16;interval=1;duration=250;charges=3;r=2;vy=1;oy=1;hnp=true;vr=2} @self
    - potion{type=DAMAGE_RESISTANCE;duration=250;level=2;p=true} @self
    - potion{type=FIRE_RESISTANCE;duration=250;level=1;p=true} @self

Mastermind_Armor_Orb_Tick:
  Skills:
    - effect:particles{p=enchantment_table;amount=40;speed=0;hS=0.2;vS=0.5;color=#ebc634} @origin
    - shieldPercent{mS=0.33} @self

Mastermind_Fly:
  Skills:
    # Applies effects on self
    - potion{type=LEVITATION;duration=50;level=1;p=false} @self

Mastermind_Bombard_Cast:
  Cooldown:
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - delay 30
    # Fires projectiles
    - skill{s=Mastermind_Bombard_Projectile} @target
    - delay 30
    - skill{s=Mastermind_Bombard_Projectile} @target
    - delay 30
    - skill{s=Mastermind_Bombard_Projectile} @target
    - delay 30

Mastermind_Bombard_Projectile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.1} @self
    - projectile{onTick=Mastermind_Bombard_Tick;onEnd=Mastermind_Bombard_End;v=22;i=1;hR=1;vR=1;syo=1.5;md=120;g=0.5;sE=false}

Mastermind_Bombard_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=spell_witch;a=40;hs=0.1;vs=0.05;color=#cb48ea} @origin

Mastermind_Bombard_End:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.1} @PlayersNearOrigin{r=4}
    # Applies stat effects
    - damage{a=10} @PlayersNearOrigin{r=4}
    # Shows SFX
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=1;points=8;a=40;hs=0.4;vs=1;color=#cb48ea} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=2;points=12;a=40;hs=0.4;vs=0.7;color=#cb48ea} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=spell_witch;radius=4;points=16;a=40;hs=0.5;vs=0.4;color=#cb48ea} @origin

Mastermind_Regenerate:
  Cooldown: 40
  Skills:
    - actionmessage{m="The &5&lMind Flayer&f is regenerating! Stop him!"} @PlayersInRadius{r=30}
    - effect:sound{s=entity.enderman.scream;v=1.5;p=0.5} @self
    - setstance{s=Regenerating} @Self
    - skill{s=Mastermind_Heal} @self

Mastermind_Regenerate_Tick:
  Skills:
    - effect:particles{p=reddust;amount=40;speed=0;hS=0.1;vS=0.1;color=#e8202e} @origin

Mastermind_Heal:
  Conditions:
    - stance Regenerating
  Skills:
    - effect:particles{p=heart;a=10;hs=0.5;y=1} @self
    - orbital{onTick=Mastermind_Regenerate_Tick;points=32;interval=1;duration=60;r=3;vy=1;oy=1;hnp=true;vr=2} @self
    - sound{s=entity.enderman.scream;p=1.7} @self
    - healpercent{m=0.05} @self
    - delay 60
    - skill{s=Mastermind_Heal} @self

Mastermind_Interrupt_Regeneration:
  Conditions:
    - stance Regenerating required
  Skills:
    - setstance{s=Regeneration_Interrupted} @Self
    - effect:particles{p=damageIndicator;a=20;hs=1;y=1} @self
    - sound{s=entity.enderman.death;p=0.1} @self
    - actionmessage{m="The &5&lMind Flayer<&sq>s&f regeneration was interrupted!"} @PlayersInRadius{r=30}

Mastermind_Missile_Cast:
  Cooldown:
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - delay 30
    # Fires projectiles
    - skill{s=Mastermind_Missile} @target
    - delay 20
    - skill{s=Mastermind_Missile} @target
    - delay 20
    - skill{s=Mastermind_Missile} @target
    - delay 20

Mastermind_Missile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.9} @self
    - missile{onTick=Deep_Petrify_Tick;onHit=Mastermind_Missile_Hit;onEnd=Mastermind_Missile_Miss;in=16;v=12;i=1;hR=1;vR=1;syo=1.5;hnp=false} @target

Mastermind_Missile_Hit:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:particles{particle=largeexplosion;amount=10} @origin
    - effect:sound{s=entity.generic.explode} @origin
    # Damages
    - damage{a=8} @target
    - throw{velocity=6;velocityY=2} @target

Mastermind_Missile_Miss:
  # SFX and functionality for magic missile miss
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=2} @origin
    - effect:particles{particle=largeexplosion;amount=10} @origin
    - effect:sound{s=entity.generic.explode} @origin

Mastermind_Necrosis_Missile_Cast:
  Cooldown:
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - delay 30
    # Fires projectiles
    - skill{s=Mastermind_Necrosis_Missile} @target
    - delay 20
    - skill{s=Mastermind_Necrosis_Missile} @target
    - delay 20
    - skill{s=Mastermind_Necrosis_Missile} @target
    - delay 20

Mastermind_Necrosis_Missile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.wither.hurt;v=1;p=0.7} @self
    - missile{onTick=Mastermind_Necrosis_Missile_Tick;onHit=Mastermind_Necrosis_Missile_Hit;onEnd=Mastermind_Missile_Miss;in=20;v=7.5;i=1;hR=1;vR=1;syo=1.5;hnp=false;md=160} @target

Mastermind_Necrosis_Missile_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=mobspell;a=20;s=0;hs=0.2;vs=0.2;color=#1f1d1d} @origin

Mastermind_Necrosis_Missile_Hit:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:particles{particle=largeexplosion;amount=10} @origin
    - effect:sound{s=entity.generic.explode} @origin
    # Damages
    - potion{type=HUNGER;duration=250;level=2;p=true} @target
    - potion{type=WITHER;duration=150;level=1;p=true} @target
    - potion{type=SLOW;duration=250;level=2;p=true} @target
    - throw{velocity=6;velocityY=2} @target

Mastermind_Necrosis_Missile_Miss:
  # SFX and functionality for magic missile miss
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.generic.explode} @origin
    - effect:particles{particle=largeexplosion;amount=10} @origin

Mastermind_Incinerate:
  Conditions:
    - stance{s=Regenerating} false
  Cooldown: 60
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - delay 30
    # Applies effects on self
    - potion{type=FIRE_RESISTANCE;duration=350;level=1;p=true} @self
    # Applies effects on players
    - damage{a=4} @PIR{r=8}
    - ignite{ticks=200} @PIR{r=8}
    - throw{velocity=6;velocityY=2} @PIR{r=8}
    # Shows SFX
    - effect:sound{s=entity.generic.explode} @origin
    - effect:particles{particle=largeexplosion;amount=10} @origin
    - effect:particlering{p=flame;radius=2;points=8;a=80;hs=0.3;vs=1.5} @origin
    - effect:particlering{p=smoke_large;radius=2;points=8;a=80;hs=0.3;vs=1.5} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode} @origin
    - effect:particlering{p=flame;radius=4;points=12;a=40;hs=0.3;vs=1.2} @origin
    - effect:particlering{p=smoke_large;radius=4;points=12;a=40;hs=0.3;vs=1.2} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode} @origin
    - effect:particlering{p=flame;radius=6;points=16;a=20;hs=0.3;vs=1} @origin
    - effect:particlering{p=smoke_large;radius=6;points=16;a=20;hs=0.3;vs=1} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode} @origin
    - effect:particlering{p=flame;radius=8;points=32;a=10;hs=0.3;vs=0.6} @origin
    - effect:particlering{p=smoke_large;radius=8;points=32;a=10;hs=0.3;vs=0.6} @origin
    # Summons Blazes
    - summon{type=Blaze;amount=3;r=4} @SelfLocation
    - rally{types=Blaze;r=5} @self

Mastermind_Summon_Polyps:
  Cooldown: 180
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.1} @self
    - delay 30
    # Shows SFX
    - effect:sound{s=block.portal.travel;v=0.6;p=1.5} @origin
    - effect:particlering{p=soul_fire_flame;radius=2;points=8;a=80;hs=0.3;vs=1.5} @origin
    - effect:particlering{p=smoke_large;radius=2;points=8;a=80;hs=0.3;vs=1.5} @origin
    - delay 2
    - effect:sound{s=entity.enderman.teleport;v=0.75;p=0.75} @origin
    - effect:particlering{p=soul_fire_flame;radius=4;points=12;a=40;hs=0.3;vs=1.2} @origin
    - effect:particlering{p=smoke_large;radius=4;points=12;a=40;hs=0.3;vs=1.2} @origin
    - delay 2
    - effect:sound{s=entity.enderman.teleport;v=0.75;p=0.75} @origin
    - effect:particlering{p=soul_fire_flame;radius=6;points=16;a=20;hs=0.3;vs=1} @origin
    - effect:particlering{p=smoke_large;radius=6;points=16;a=20;hs=0.3;vs=1} @origin
    - delay 2
    - effect:sound{s=entity.enderman.teleport;v=0.75;p=0.75} @origin
    - effect:particlering{p=soul_fire_flame;radius=8;points=32;a=10;hs=0.3;vs=0.6} @origin
    - effect:particlering{p=smoke_large;radius=8;points=32;a=10;hs=0.3;vs=0.6} @origin
    # Summons Polyps
    - summon{type=Deep_Polyp;amount=3;r=4} @SelfLocation
    - rally{types=Deep_Polyp;r=5} @self

Polyp_Initialize:
  Skills:
    # Applies effects on self
    - setvariable{var=global.SummonCount;value=0} @self
    - potion{type=SLOW_FALLING;duration=9999999;level=1;p=false} @self

Polyp_Smite:
  Conditions:
    - targetinlineofsight required
  TargetConditions:
    - distance{d=1to15} required
  Cooldown: 20
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.1} @self
    - delay 30
    # Applies effects to target
    - effect:lightning @target
    - ignite{ticks=100} @target
    - damage{a=9} @target

Polyp_Laser_Cast:
  Conditions:
    - targetinlineofsight required
  TargetConditions:
    - distance{d=1to30} required
  Cooldown: 20
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.1} @self
    - delay 30
    - skill{s=Polyp_Laser} @target

Polyp_Laser:
  Conditions:
    - targetinlineofsight required
  TargetConditions:
    - distance{d=1to30} required
  Skills:
    # SFX
    - sound{s=entity.enderman.teleport;p=1.8} @target
    - effect:enderbeam{d=20;y=1.2} @target
    # Applies effects to target
    - damage{a=2.5} @target
    - potion{type=SLOW;duration=20;level=1;p=false} @target
    - potion{type=WEAKNESS;duration=20;level=1;p=false} @target
    # Casts again
    - delay 20
    - skill{s=Polyp_Laser} @target

Polyp_Summon_Projectile:
  Conditions:
    - variableInRange{var=global.SummonCount;value=<60} required
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=1} @self
    - projectile{onTick=Polyp_Summon_Tick;onEnd=Polyp_Summon_End;v=10;i=1;hR=1;vR=1;syo=1.5;md=120;g=0.5;sE=false}
    - variableadd{var=global.SummonCount;amount=2} @self

Polyp_Summon_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=glow;a=40;hs=0.1;vs=0.05} @origin

Polyp_Summon_End:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.scream;v=1;p=0.6} @PlayersNearOrigin{r=4}
    # Shows SFX
    - effect:sound{s=entity.enderman.teleport;v=0.75;p=0.75} @origin
    - effect:particlering{p=glow;radius=1;points=8;a=40;hs=0.4;vs=1;color=#cb48ea} @origin
    - delay 2
    - effect:sound{s=entity.enderman.teleport;v=0.75;p=0.75} @origin
    - effect:particlering{p=glow;radius=2;points=12;a=40;hs=0.4;vs=0.7;color=#cb48ea} @origin
    - summon{type=Deep_Interdimensional_Invader;amount=2;r=2} @origin
    - rally{types=Deep_Interdimensional_Invader;r=3} @origin

Interdimensional_Invader_Explode:
  # SFX and functionality for magic missle hit
  Skills:
    - effect:particles{particle=largeexplosion;amount=5;hs=1;vs=1} @self
    - effect:sound{s=entity.generic.explode} @self
    - throw{v=3;vy=3} @EIR{r=3;t=Deep_Interdimensional_Invader}
    - damage{a=10} @EIR{r=3;t=Deep_Interdimensional_Invader}
    - variablesubtract{var=global.SummonCount;amount=1} @self

Cleric_Cloak:
  Skills:
    # Applies effects on self
    - setstance{s=Cloaked} @self
    - potion{type=INVISIBILITY;duration=1200;level=1;p=false} @self
    - potion{type=SPEED;duration=1200;level=3;p=false} @self
    # Applies effects on players
    - potion{type=BLINDNESS;duration=1200;level=1;} @PIR{r=25}
    # Shows SFX
    - effect:sound{s=entity.wither.ambient;v=2;p=0.1} @self
    - effect:particlering{p=redDust;radius=3;points=8;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=6;points=12;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=9;points=16;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=12;points=32;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=15;points=32;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=18;points=32;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=21;points=32;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 4
    - effect:particlering{p=redDust;radius=25;points=32;a=120;hs=2;vs=1;color=#1f1d1d} @origin
    - delay 1172
    - setstance{s=Normal} @self

Cleric_Death_Touch:
  Conditions:
    - stance{s=Cloaked} required
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs attack
    - effect:particles{p=sweep_attack;a=1;hs=0.25;vs=0.25;y=1} @self
    - effect:sound{s=entity.player.attack.sweep;v=1;p=0.05} @self
    - delay 20
    # Applies stat effects
    - potion{type=WITHER;duration=140;level=1} @PlayersNearOrigin{r=4}
    - potion{type=WEAKNESS;duration=140;level=1} @PlayersNearOrigin{r=4}
    # Shows SFX
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=redDust;radius=1;points=8;a=60;hs=0.2;vs=0.3;color=#1f1d1d} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=redDust;radius=2;points=12;a=60;hs=0.2;vs=0.3;color=#1f1d1d} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=redDust;radius=4;points=16;a=60;hs=0.2;vs=0.3;color=#1f1d1d} @origin

Cleric_Relocate:
  Conditions:
    - stance{s=Cloaked} cancel
  Skills:
    # Effects before teleport
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - potion{type=BLINDNESS;duration=30;level=1;} @PIR{r=3}
    - effect:sound{s=block.fire.extinguish;v=0.65;p=0.5} @self
    - teleport{spreadh=10;spreadv=2} @self
    # Effects after teleport
    - delay 5
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self

Cleric_Relocate_Decoy:
  Conditions:
    - stance{s=Cloaked} cancel
  Skills:
    # Effects before teleport
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - potion{type=BLINDNESS;duration=30;level=1;} @PIR{r=3}
    - effect:sound{s=block.fire.extinguish;v=0.65;p=0.5} @self
    - teleport{spreadh=10;spreadv=2} @self
    # Effects after teleport
    - delay 5
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - summon{type=Deep_Cleric_Decoy;amount=3;r=10;yr=2} @self

Cleric_Relocate_Decoy_Caster:
  Conditions:
    - stance{s=Cloaked} cancel
  Skills:
    # Effects before teleport
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - potion{type=BLINDNESS;duration=30;level=1;} @PIR{r=3}
    - effect:sound{s=block.fire.extinguish;v=0.65;p=0.5} @self
    - teleport{spreadh=10;spreadv=2} @self
    # Effects after teleport
    - delay 5
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - summon{type=Deep_Cleric_Decoy_Caster;amount=3;r=10;yr=2} @self

Cleric_Decoy_Spawn:
  Skills:
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - delay 140
    - damage{a=100} @self
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self

Cleric_Decoy_Explode:
  Skills:
    # Waits
    - delay 100
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - potion{type=LEVITATION;duration=40;level=1;p=false} @self
    - delay 40
    # Explodes
    - effect:particles{particle=largeexplosion;amount=10} @self
    - effect:sound{s=entity.generic.explode} @origin
    - effect:particlesphere{particle=reddust;amount=50;radius=2} @self
    - delay 2
    - effect:particlesphere{particle=reddust;amount=100;radius=2} @self
    - delay 2
    - effect:particlesphere{particle=reddust;amount=150;radius=3} @self
    # Damages Self and Player
    - damage{a=15} @PIR{r=5}
    - damage{a=100} @self

Cleric_Decoy_Shadowbolt:
  Skills:
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self
    - delay 70
    - skill{s=Cleric_Shadowbolt_Projectile} @target
    - delay 70
    - damage{a=100} @self
    - effect:particles{p=smoke_large;a=30;hs=0.15;vs=0.25;y=1} @self

Cleric_Doom_Missile_Cast:
  Conditions:
    - stance{s=Cloaked} cancel
  Cooldown: 120
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.wither.ambient;v=2;p=0.6} @self
    - actionmessage{m="The &4&lAbyssal Cleric&f is casting a &cDoom Bolt&f! Run!"} @PlayersInRadius{r=30}
    - potion{type=LEVITATION;duration=60;level=1} @self
    - delay 60
    - potion{type=SLOW_FALLING;duration=60;level=1} @self
    # Fires projectiles
    - skill{s=Cleric_Doom_Missile} @target

Cleric_Doom_Missile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=2;p=0.3} @self
    - missile{onTick=Cleric_Doom_Missile_Tick;onHit=Cleric_Doom_Missile_Hit;onEnd=Cleric_Doom_Missile_Miss;v=6;i=1;hR=1;vR=1;syo=1.5;hnp=false} @target

Cleric_Doom_Missile_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25;color=#1f1d1d} @origin
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25} @origin

Cleric_Doom_Missile_Hit:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - actionmessage{m="You were hit by the &cDoom Bolt&f! Inevitable death approaches..."} @target
    - effect:particles{particle=largeexplosion;amount=10} @target
    - effect:sound{s=entity.wither.spawn;v=1;p=0.1} @target
    - damage{a=0.1} @target
    # Applies initial effects
    - weather{type=storm;duration=215}
    - potion{type=BLINDNESS;duration=285;level=1;} @target
    - delay 80
    # Telegraphs approaching death
    - actionmessage{m="&4&l&kDOOM COMES"} @target
    - delay 15
    - actionmessage{m="&4&lD&kOOM COMES"} @target
    - delay 15
    - actionmessage{m="&4&lDO&kOM COMES"} @target
    - delay 15
    - actionmessage{m="&4&lDOO&kM COMES"} @target
    - delay 15
    - actionmessage{m="&4&lDOOM&k COMES"} @target
    - delay 15
    - actionmessage{m="&4&lDOOM C&kOMES"} @target
    - delay 15
    - actionmessage{m="&4&lDOOM CO&kMES"} @target
    - delay 15
    - actionmessage{m="&4&lDOOM COM&kES"} @target
    - delay 15
    - actionmessage{m="&4&lDOOM COME&kS"} @target
    - delay 15
    - actionmessage{m="&4&lDOOM COMES"} @target
    # Kills player
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25;color=#1f1d1d} @target
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25} @target
    - effect:sound{s=entity.wither.spawn;v=0.25;p=0.5} @target
    - damage{a=9999} @target

Cleric_Doom_Missile_Miss:
  # SFX and functionality for magic missile miss
  Skills:
    # Telegraphs player has been hit
    - actionmessage{m="The &cDoom Bolt&f missed! You<&sq>re safe!"} @PlayersNearOrigin{r=30}
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.45} @origin
    - effect:particles{particle=largeexplosion;amount=10} @origin
    - effect:sound{s=entity.generic.explode} @origin

Cleric_Bombard_Cast:
  Conditions:
    - stance{s=Cloaked} cancel
  Cooldown: 30
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - potion{type=LEVITATION;duration=115;level=1} @self
    - delay 40
    - potion{type=SLOW_FALLING;duration=150;level=1} @self
    # Fires projectiles
    - skill{s=Cleric_Bombard_Projectile} @target
    - delay 15
    - skill{s=Cleric_Bombard_Projectile} @target
    - delay 15
    - skill{s=Cleric_Bombard_Projectile} @target
    - delay 15
    - skill{s=Cleric_Bombard_Projectile} @target
    - delay 15
    - skill{s=Cleric_Bombard_Projectile} @target
    - delay 15

Cleric_Bombard_Projectile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.1} @self
    - projectile{onTick=Cleric_Bombard_Tick;onEnd=Cleric_Bombard_End;v=22;i=1;hR=1;vR=1;syo=1.5;md=120;g=0.5;sE=false}

Cleric_Bombard_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=reddust;a=40;hs=0.1;vs=0.05} @origin

Cleric_Bombard_End:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.1} @PlayersNearOrigin{r=4}
    # Applies stat effects
    - damage{a=10} @PlayersNearOrigin{r=4}
    # Shows SFX
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=reddust;radius=1;points=8;a=40;hs=0.4;vs=1} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=reddust;radius=2;points=12;a=40;hs=0.4;vs=0.7} @origin
    - delay 2
    - effect:sound{s=entity.generic.explode;v=0.75;p=0.75} @origin
    - effect:particlering{p=reddust;radius=4;points=16;a=40;hs=0.5;vs=0.4} @origin

Cleric_Darkstrike:
  Conditions:
    - stance{s=Cloaked} cancel
  # SFX and functionality for magic missle hit
  Skills:
    # Applies stat effects
    - potion{type=WITHER;duration=80;level=1} @target
    - potion{type=WEAKNESS;duration=80;level=1} @target
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25;color=#1f1d1d} @target

Cleric_Shadowbolt_Cast:
  Conditions:
    - stance{s=Cloaked} cancel
  Cooldown: 40
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - potion{type=LEVITATION;duration=40;level=1} @self
    - delay 40
    - potion{type=SLOW_FALLING;duration=50;level=1} @self
    # Fires projectiles
    - skill{s=Cleric_Shadowbolt_Projectile} @PIR{r=18;}

Cleric_Shadowbolt_Projectile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self
    - missile{onTick=Cleric_Shadowbolt_Tick;onHit=Cleric_Shadowbolt_Hit;onEnd=Deep_Slow_Miss;v=8;i=4;hR=1;vR=1;syo=1.5;hnp=false} @target

Cleric_Shadowbolt_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=reddust;a=40;hs=0.15;vs=0.15;color=#1f1d1d} @origin

Cleric_Shadowbolt_Hit:
  # SFX and functionality for magic missle hit
  Skills:
    # Telegraphs player has been hit
    - effect:sound{s=entity.wither.ambient;v=0.25;p=1.7} @target
    - effect:particles{p=redDust;a=40;hs=0.25;vs=0.25;color=#1f1d1d} @target
    # Applies effects
    - potion{type=BLINDNESS;duration=300;level=1;} @target
    - potion{type=SLOW;duration=300;level=2;} @target

Cleric_Healing_Prison_Cast:
  Conditions:
    - stance{s=Cloaked} cancel
  Cooldown: 20
  Skills:
    # Telegraphs attack
    - effect:particles{p=angryVillager;a=10;hs=0.5;y=1} @self
    - sound{s=entity.enderman.scream;p=0.6} @self
    - potion{type=LEVITATION;duration=40;level=1} @self
    - delay 40
    - potion{type=SLOW_FALLING;duration=50;level=1} @self
    # Fires projectiles
    - skill{s=Cleric_Healing_Prison_Projectile} @target

Cleric_Healing_Prison_Projectile:
  # Throws a projectile which slows down the player
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self
    - missile{onTick=Cleric_Healing_Prison_Projectile_Tick;onHit=Cleric_Healing_Prison;onEnd=Deep_Slow_Miss;v=8;i=4;hR=1;vR=1;syo=1.5;hnp=false} @target

Cleric_Healing_Prison_Projectile_Tick:
  # SFX for Matriarch Spit Tick
  Skills:
    - effect:particles{p=mobspell;a=40;hs=0.15;vs=0.15;color=#ad0909} @origin

Cleric_Healing_Prison:
  # Imprisons the player and heals mobs around them
  Cooldown: 20
  Skills:
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.3} @target
    - prison{material=REDSTONE_BLOCK;duration=80} @target
    - skill{s=Cleric_Healing_Wave} @target
    - delay 20
    - skill{s=Cleric_Healing_Wave} @target
    - delay 20
    - skill{s=Cleric_Healing_Wave} @target

Cleric_Healing_Wave:
  # Heals nearby mobs
  Skills:
    - heal{amount=6} @self
    # Visual effects
    - effect:particles{p=heart;a=10;hs=0.5;y=1} @self
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.3} @self
    - effect:particlering{p=reddust;radius=2;points=8;a=40;hs=0.4;vs=1} @origin
    - delay 2
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.6} @self
    - effect:particlering{p=reddust;radius=4;points=12;a=40;hs=0.4;vs=0.7} @origin
    - delay 2
    - effect:sound{s=entity.enderman.teleport;v=1;p=1.9} @self
    - effect:particlering{p=reddust;radius=6;points=16;a=40;hs=0.5;vs=0.4} @origin

Cleric_Followers_1:
  # Summons 3 deep captains.
  Skills:
    - summon{type=Deep_Captain;amount=3;radius=5} @SelfLocation

Cleric_Followers_2:
  # Summons 2 deep rangers.
  Skills:
    - summon{type=Deep_Ranger;amount=2;radius=5} @SelfLocation

Cleric_Followers_3:
  # Summons 2 deep captains, 1 deep ranger.
  Skills:
    - summon{type=Deep_Captain;amount=2;radius=5} @SelfLocation
    - summon{type=Deep_Ranger;amount=1;radius=5} @SelfLocation

Cleric_Summon_Mastermind_Cast:
  Skills:
    - actionmessage{m="The &4&lAbyssal Cleric&f is summoning a &5&lMind Flayer&f! Stop him!"} @PlayersInRadius{r=30}
    - effect:sound{s=entity.wither.spawn;v=2;p=2} @target
    - setstance{s=Summoning} @Self
    - skill{s=Cleric_Summon_Mastermind_Channel} @self

Cleric_Summon_Mastermind_Tick:
  Skills:
    - effect:particles{p=spell_witch;amount=40;speed=0;hS=0.1;vS=0.1} @origin

Cleric_Summon_Mastermind_Channel:
  Conditions:
    - stance Summoning required
  Skills:
    - effect:particles{p=portal;a=10;hs=0.5;y=1} @self
    - orbital{onTick=Cleric_Summon_Mastermind_Tick;points=32;interval=1;duration=300;r=3;vy=1;oy=1;hnp=true;vr=2} @self
    - delay 300
    - skill{s=Cleric_Summon_Mastermind_Complete} @self

Cleric_Summon_Mastermind_Complete:
  Conditions:
    - stance Summoning_Interrupted cancel
  Skills:
    # VFX
    - effect:sound{s=block.portal.travel;v=0.6;p=1.5} @origin
    - effect:particlesphere{particle=portal;amount=50;radius=2} @self
    - delay 2
    - effect:particlesphere{particle=portal;amount=100;radius=2} @self
    - delay 2
    - effect:particlesphere{particle=portal;amount=150;radius=3} @self
    # Spawns the Mind Flayer
    - summon{type=Deep_Mastermind;amount=1;radius=5} @SelfLocation

Cleric_Interrupt_Summon:
  Conditions:
    - stance Summoning required
  Skills:
    - setstance{s=Summoning_Interrupted} @Self
    - effect:particles{p=enchantment_table;a=20;hs=1;y=1} @self
    - effect:sound{s=entity.wither.hurt;v=1.5;p=0.5} @self
    - actionmessage{m="The &4&lAbyssal Cleric<&sq>s&f summoning was interrupted!"} @PlayersInRadius{r=30}